# DotLog 1인 운영자를 위한 완전 무료 서비스 구조 및 운영 가이드

개발자가 아닌 운영자님을 위해, 비용이 0원인 구조와 현재 발생한 문제의 해결 방법, 그리고 앞으로의 운영 흐름을 정리해 드립니다.

## 1. 전체 서비스 구조 (비용 0원 전략)

이 웹사이트는 '서버'를 따로 임대하지 않고, **무료로 제공되는 클라우드 서비스들을 레고처럼 조립**해서 운영하는 방식입니다.

*   **웹사이트 화면 (프론트엔드)**: `Cloudflare Pages` 또는 `GitHub Pages` (무료 호스팅)
    *   인터넷에 사이트를 띄워주는 역할을 합니다.
*   **사용자 관리 & 데이터 저장 (백엔드)**: `Supabase` (무료 플랜)
    *   회원가입/로그인 처리 (Authentication)
    *   도안/비즈 데이터 저장 (Database)
    *   이미지 파일 저장 (Storage - 1GB 무료)
*   **AI 분석**: `Google Gemini` (사용자 개인 계정)
    *   사이트에 API를 연결하면 비용이 발생하므로, **사용자가 직접 Gemini 사이트에서 분석하고 결과만 가져오는 방식**을 사용합니다.
    *   이 방식은 서버 비용이 들지 않고, Gemini의 강력한 성능(Pro 모델 등)을 무료로 활용할 수 있습니다.

---

## 2. 발생했던 문제와 해결 방법

### 문제 1: 로그인 버튼이 동작하지 않음
*   **원인**: 화면(HTML)에는 로그인 버튼이 있지만, 실제로 Supabase에 "로그인해줘"라고 신호를 보내는 **연결 선(이벤트 리스너)**이 끊어져 있거나, 소셜 로그인(GitHub) 기능이 버튼에 연결되지 않았습니다.
*   **해결**: 
    1.  `GitHub로 로그인` 버튼을 화면에 추가합니다.
    2.  버튼을 누르면 Supabase를 통해 GitHub 인증 페이지로 이동하도록 코드를 연결합니다.

### 문제 2: 이미지가 보이지 않음 (엑박)
*   **원인**: 기존 방식은 이미지를 글자 코드(Base64)로 변환해서 저장했는데, 고화질 이미지는 글자가 너무 길어서 저장이 안 되거나 깨지는 문제가 발생했습니다.
*   **해결**:
    1.  **Supabase Storage(창고)** 기능을 사용하도록 변경합니다.
    2.  이미지 파일 자체는 '창고'에 저장하고, 데이터베이스에는 그 이미지를 볼 수 있는 '주소(URL)'만 작게 저장합니다.
    3.  **운영자님 할 일**: Supabase 대시보드에서 `Storage` 메뉴로 다, `images`라는 이름의 **Public Bucket(공개 버킷)**을 하나 만들어주셔야 합니다.

---

## 3. 개선된 UX 흐름 (사용자 시나리오)

### A. 로그인/회원가입
1.  사용자가 사이트에 접속합니다.
2.  `GitHub로 시작하기` 또는 `이메일 로그인`을 클릭합니다.
3.  별도의 복잡한 가입 절차 없이 바로 로그인이 완료됩니다. (7일간 접속이 없어도 사이트는 계속 켜져 있지만, 프로젝트 유지를 위해 운영자님이 일주일에 한 번 정도는 로그인해서 데이터를 확인해 주시는 것이 좋습니다.)

### B. 도안 등록 (이미지 업로드)
1.  [도안 등록] 버튼을 누릅니다.
2.  도안 이름을 입력하고 `이미지 선택`을 누릅니다.
3.  스마트폰이나 PC에 있는 사진을 선택하면, 자동으로 Supabase 창고에 안전하게 저장되고 화면에 표시됩니다. (용량 최적화 적용)

### C. AI 분석 (비용 0원 핵심 기능)
1.  메뉴에서 `AI 스캔`을 선택합니다.
2.  화면에 있는 **"프롬프트 복사"** 버튼을 누릅니다. (AI에게 시킬 명령어가 복사됩니다.)
3.  **"Gemini 열기"** 버튼을 눌러 새 창을 띄웁니다.
4.  Gemini에게 도안 사진을 올리고, 복사한 명령어를 붙여넣어 전송합니다.
5.  Gemini가 표를 만들어주면, 그 표를 그대로 복사합니다.
6.  다시 DotLog 사이트로 돌아와 입력창에 붙여넣고 **"분석하기"**를 누르면 끝!

---

## 4. 운영자님이 지금 바로 해야 할 일 (Supabase 설정)

코드가 정상 동작하려면 Supabase 사이트에서 딱 하나만 설정해주시면 됩니다.

1.  **Supabase 프로젝트 접속**: [supabase.com](https://supabase.com) 로그인
2.  **Storage 메뉴 이동**: 왼쪽 아이콘 중 `Storage` (상자 모양) 클릭
3.  **새 버킷 만들기 (New Bucket)**:
    *   Name: `images` (정확히 소문자로 입력)
    *   **Public Bucket**: **반드시 체크 (ON)**
    *   Save 클릭
4.  **정책 설정 (Policies)**:
    *   방금 만든 `images` 버킷의 `Configuration` 또는 `Policies` 탭 클릭
    *   "New Policy" -> "For full customization" 선택
    *   Policy Name: `Public Access`
    *   Allowed operations: `SELECT`, `INSERT`, `UPDATE`, `DELETE` 모두 체크 (편의상 모든 권한 허용, 실제 서비스 시엔 보안 조절 필요하지만 개인 운영용으론 무관)
    *   Review -> Save

이제, 제가 수정한 코드를 적용하면 모든 기능이 정상 작동할 것입니다.
